<?php

use MydPro\Includes\Store_Data;
use MydPro\Includes\Fdm_svg;

if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

?>
<script type="text/javascript">
	window.addEventListener("load", function() {
		setInterval( function() { doCheckApi("<?php echo esc_attr( home_url() . '/wp-json/my-delivery/v1/orders' ); ?>") },
		10000);
	});
</script>

<div id="hide-prints">
	<?php echo $this->loop_print_order(); ?>
</div>

<div class="fdm-ordres-wrap">
	<div class="fdm-orders-content">
		<div class="fdm-orders-list">
			<div class="fdm-orders-list-action">
				<input type="text" class="fdm-input-filter" placeholder="<?php esc_html_e( 'Filter by name, order number, status or phone', 'drope-delivery' ); ?>">
			</div>

			<div class="fdm-orders-loop">
				<?php echo $this->loop_orders_list(); ?>
			</div>
		</div>

		<div class="fdm-orders-full-details">
			<div class="fdm-orders-list-action-up">
				<div class="fdm-btn-order-action-back" id="fdm-back"><?php esc_html_e( 'Back to order list', 'drope-delivery' ); ?></div>
				<div class="myd-orders-panel__notification-status">
					<svg fill="#000000" height="20px" width="20px" version="1.0" id="myd-notification-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 611.999 611.999" xml:space="preserve"><g><g><g><path d="M570.107,500.254c-65.037-29.371-67.511-155.441-67.559-158.622v-84.578c0-81.402-49.742-151.399-120.427-181.203C381.969,34,347.883,0,306.001,0c-41.883,0-75.968,34.002-76.121,75.849c-70.682,29.804-120.425,99.801-120.425,181.203v84.578c-0.046,3.181-2.522,129.251-67.561,158.622c-7.409,3.347-11.481,11.412-9.768,19.36c1.711,7.949,8.74,13.626,16.871,13.626h164.88c3.38,18.594,12.172,35.892,25.619,49.903c17.86,18.608,41.479,28.856,66.502,28.856c25.025,0,48.644-10.248,66.502-28.856c13.449-14.012,22.241-31.311,25.619-49.903h164.88c8.131,0,15.159-5.676,16.872-13.626C581.586,511.664,577.516,503.6,570.107,500.254z M484.434,439.859c6.837,20.728,16.518,41.544,30.246,58.866H97.32c13.726-17.32,23.407-38.135,30.244-58.866H484.434z M306.001,34.515c18.945,0,34.963,12.73,39.975,30.082c-12.912-2.678-26.282-4.09-39.975-4.09s-27.063,1.411-39.975,4.09C271.039,47.246,287.057,34.515,306.001,34.515zM143.97,341.736v-84.685c0-89.343,72.686-162.029,162.031-162.029s162.031,72.686,162.031,162.029v84.826c0.023,2.596,0.427,29.879,7.303,63.465H136.663C143.543,371.724,143.949,344.393,143.97,341.736z M306.001,577.485c-26.341,0-49.33-18.992-56.709-44.246h113.416C355.329,558.493,332.344,577.485,306.001,577.485z"/><path d="M306.001,119.235c-74.25,0-134.657,60.405-134.657,134.654c0,9.531,7.727,17.258,17.258,17.258c9.531,0,17.258-7.727,17.258-17.258c0-55.217,44.923-100.139,100.142-100.139c9.531,0,17.258-7.727,17.258-17.258C323.259,126.96,315.532,119.235,306.001,119.235z"/></g></g></g></svg>
					<p
						id="myd-orders-panel-notification-status-label"
						class="myd-orders-panel__notification-status-label"
						data-unsuported-message="<?php esc_html_e( 'Browser do not support notifications', 'drope-delivery' ); ?>"
						data-disabled-message="<?php esc_html_e( 'Notifications disabled', 'drope-delivery' ); ?>"
						data-enabled-message="<?php esc_html_e( 'Notifications enabled', 'drope-delivery' ); ?>"
						data-notification-title="<?php esc_html_e( 'New Order!', 'drope-delivery' ); ?>"
						data-notification-body="<?php esc_html_e( 'Hey, you got a new order. Check now!', 'drope-delivery' ); ?>"
					>
						<?php esc_html_e( 'Checking notification support...', 'drope-delivery' ); ?>
					</p>
				</div>
				<div class="fdm-btn-order-action" data-print-size="<?php echo esc_attr( Store_Data::get_store_data( 'print_size' ) ); ?>" data-print-font="<?php echo esc_attr( Store_Data::get_store_data( 'print_font_size' ) ); ?>" data-manage-order-id="" data-manage-order-action="print" id="fdm-print-order"><?php echo Fdm_svg::svg_print(); ?> <?php esc_html_e( 'Print Order','drope-delivery' ); ?></div>
			</div>

			<div class="fdm-orders-full">
				<?php echo $this->loop_orders_full(); ?>
			</div>

			<div class="fdm-orders-list-action-full">
				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="confirmed"
					id="fdm-confirm-order"
				>
					<svg height="10pt" id="icon-fdm-plugin-cart" viewBox="0 -31 512.00026 512" width="10pt" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="m164.960938 300.003906h.023437c.019531 0 .039063-.003906.058594-.003906h271.957031c6.695312 0 12.582031-4.441406 14.421875-10.878906l60-210c1.292969-4.527344.386719-9.394532-2.445313-13.152344-2.835937-3.757812-7.269531-5.96875-11.976562-5.96875h-366.632812l-10.722657-48.253906c-1.527343-6.863282-7.613281-11.746094-14.644531-11.746094h-90c-8.285156 0-15 6.714844-15 15s6.714844 15 15 15h77.96875c1.898438 8.550781 51.3125 230.917969 54.15625 243.710938-15.941406 6.929687-27.125 22.824218-27.125 41.289062 0 24.8125 20.1875 45 45 45h272c8.285156 0 15-6.714844 15-15s-6.714844-15-15-15h-272c-8.269531 0-15-6.730469-15-15 0-8.257812 6.707031-14.976562 14.960938-14.996094zm312.152343-210.003906-51.429687 180h-248.652344l-40-180zm0 0"/><path d="m150 405c0 24.8125 20.1875 45 45 45s45-20.1875 45-45-20.1875-45-45-45-45 20.1875-45 45zm45-15c8.269531 0 15 6.730469 15 15s-6.730469 15-15 15-15-6.730469-15-15 6.730469-15 15-15zm0 0"/><path d="m362 405c0 24.8125 20.1875 45 45 45s45-20.1875 45-45-20.1875-45-45-45-45 20.1875-45 45zm45-15c8.269531 0 15 6.730469 15 15s-6.730469 15-15 15-15-6.730469-15-15 6.730469-15 15-15zm0 0"/></svg>
					<?php esc_html_e( 'Confirm', 'drope-delivery' ); ?>
				</div>

				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="done"
					id="myd-done-order"
				>
					<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="10px" height="10px"><path d="M 11 4 C 7.101563 4 4 7.101563 4 11 L 4 39 C 4 42.898438 7.101563 46 11 46 L 39 46 C 42.898438 46 46 42.898438 46 39 L 46 15 L 44 17.3125 L 44 39 C 44 41.800781 41.800781 44 39 44 L 11 44 C 8.199219 44 6 41.800781 6 39 L 6 11 C 6 8.199219 8.199219 6 11 6 L 37.40625 6 L 39 4 Z M 43.25 7.75 L 23.90625 30.5625 L 15.78125 22.96875 L 14.40625 24.4375 L 23.3125 32.71875 L 24.09375 33.4375 L 24.75 32.65625 L 44.75 9.03125 Z"/></svg>
					<?php esc_html_e( 'Done', 'drope-delivery' ); ?>
				</div>

				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="waiting"
					id="myd-waiting-order"
				>
					<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="10px" height="10px"><path d="M 25 2 C 12.309295 2 2 12.309295 2 25 C 2 37.690705 12.309295 48 25 48 C 37.690705 48 48 37.690705 48 25 C 48 12.309295 37.690705 2 25 2 z M 25 4 C 36.609824 4 46 13.390176 46 25 C 46 36.609824 36.609824 46 25 46 C 13.390176 46 4 36.609824 4 25 C 4 13.390176 13.390176 4 25 4 z M 24.984375 6.9863281 A 1.0001 1.0001 0 0 0 24 8 L 24 22.173828 A 3 3 0 0 0 22 25 A 3 3 0 0 0 22.294922 26.291016 L 16.292969 32.292969 A 1.0001 1.0001 0 1 0 17.707031 33.707031 L 23.708984 27.705078 A 3 3 0 0 0 25 28 A 3 3 0 0 0 28 25 A 3 3 0 0 0 26 22.175781 L 26 8 A 1.0001 1.0001 0 0 0 24.984375 6.9863281 z"/></svg>
					<?php esc_html_e( 'Waiting', 'drope-delivery' ); ?>
				</div>

				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="in-delivery"
					id="fdm-indelivery-order"
				>
					<svg id="Layer_5" enable-background="new 0 0 64 64" height="15px" viewBox="0 0 64 64" width="15px" xmlns="http://www.w3.org/2000/svg"><path d="m63 54c0-3.272-1.779-6.238-4.586-7.822.38-1.17.586-2.402.586-3.667 0-4.906-3.087-9.361-7.682-11.084l-.318-.12v-1.863c.591.344 1.268.556 2 .556h8v-8h-8c-.732 0-1.409.212-2 .556v-.556c0-1.601-.777-3.097-2.054-4.032-.259-1.676-1.699-2.968-3.446-2.968l-12.229-.001c1.431-1.259 2.408-3.016 2.657-5.001h3.069c1.654 0 3-1.346 3-3s-1.346-3-3-3h-4.774c-1.513-1.882-3.795-3-6.226-3-4.411 0-8 3.589-8 8 0 2.966 1.626 5.554 4.03 6.936-2.089 1.033-3.718 2.849-4.505 5.066h-15.522c-1.654 0-3 1.346-3 3v12c0 1.654 1.346 3 3 3h3.111c-1.301 1.272-2.111 3.042-2.111 5v2.026c-1.207.913-2 2.347-2 3.974 0 2.057 1.251 3.826 3.03 4.592.307 4.687 4.207 8.408 8.97 8.408 4.625 0 8.442-3.507 8.941-8h19.118c.499 4.493 4.316 8 8.941 8s8.442-3.507 8.941-8h2.059zm-2.071-1h-7.515l2.118-2.118c.855-.855 1.56-1.819 2.109-2.858 1.782 1.086 2.991 2.911 3.288 4.976zm-18.046-3.608-2.843-12.084c-.74-3.149-3.28-5.528-6.473-6.06l-.567-.095-.002-9.153h12.002v31h-2.704c.454-.701.703-1.515.702-2.37v-.24c0-.332-.039-.667-.115-.998zm11.933 5.608c-.414 1.161-1.514 2-2.816 2s-2.402-.839-2.816-2zm2.184-12.489c0 .163-.016.324-.024.486-2.195-.016-3.976-2.25-3.976-4.997 0-1.025.248-1.997.706-2.822 2.046 1.836 3.294 4.491 3.294 7.333zm-4.918-8.514c-.7 1.167-1.082 2.55-1.082 4.003 0 3.732 2.519 6.783 5.677 6.981-.434 1.681-1.299 3.227-2.559 4.487l-3.532 3.532h-3.586v-31.351c.608-.291 1.116-.748 1.468-1.317.33.489.532 1.061.532 1.668v10.693l1.616.606c.513.192 1.001.429 1.466.698zm6.918-5.997h-2v-4h2zm-6-4h2v4h-2c-1.103 0-2-.897-2-2s.897-2 2-2zm-13.002-17.002c0 .551-.448 1-1 1h-8.382l.171-.341c.512-1.023 1.54-1.659 2.684-1.659h5.527c.552 0 1 .449 1 1zm-12-4c1.375 0 2.686.481 3.737 1.319-1.17.431-2.156 1.282-2.737 2.445l-.618 1.236h-6.292c.479-2.833 2.943-5 5.91-5zm-5.91 7h11.819c-.478 2.833-2.942 5-5.91 5s-5.43-2.167-5.909-5zm-1.09 14.002c0-3.861 3.141-7.002 7.002-7.002l17.5.002c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-18.5v2h3.998l.002 10.847 2.239.374c2.394.398 4.299 2.183 4.854 4.544l2.842 12.081c.042.181.063.363.063.544v.241c0 .633-.246 1.228-.693 1.675-.448.448-1.042.694-1.675.694-1.089 0-2.033-.738-2.298-1.794l-2.604-10.419c-.558-2.23-2.552-3.787-4.851-3.787l-2.88-.001c-2.757 0-4.999-2.243-4.999-5zm13.963 29h-3.961v-9c0-1.957-.81-3.727-2.109-4.999 1.373.006 2.564.938 2.898 2.27l2.604 10.419c.118.476.314.916.568 1.31zm-25.961-30h4v4h-4zm-5 14c-.552 0-1-.448-1-1v-12c0-.551.448-1 1-1h3v6h8v-6h4.057c-.037.329-.059.662-.059 1v7.999c0 1.958.811 3.729 2.111 5.001h-1.109-8zm11 24c-3.519 0-6.432-2.614-6.92-6h2.021c.465 2.279 2.484 4 4.899 4s4.434-1.721 4.899-4h2.021c-.488 3.386-3.401 6-6.92 6zm-2.816-6h5.631c-.414 1.161-1.514 2-2.816 2s-2.401-.839-2.815-2zm12.816-2h-17c-1.654 0-3-1.346-3-3s1.346-3 3-3h14c1.654 0 3 1.346 3 3zm-3-8h-14c-.342 0-.677.035-1 .101v-1.101c0-2.757 2.243-5 5-5h8 4c2.757 0 5 2.243 5 5v9h-2v-3c0-2.757-2.243-5-5-5zm30 16c-3.519 0-6.432-2.614-6.92-6h2.021c.465 2.279 2.484 4 4.899 4s4.434-1.721 4.899-4h2.021c-.488 3.386-3.401 6-6.92 6z"/><path d="m11 49h2v2h-2z"/><path d="m7 49h2v2h-2z"/><path d="m15 49h2v2h-2z"/></svg>
					<?php esc_html_e( 'In Delivery', 'drope-delivery' ); ?>
				</div>

				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="finished"
					id="fdm-finished-order"
				>
					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M512,304c0-12.821-5.099-24.768-13.888-33.579c9.963-10.901,15.04-25.515,13.653-40.725c-2.496-27.115-26.923-48.363-55.637-48.363H324.352c6.528-19.819,16.981-56.149,16.981-85.333c0-46.272-39.317-85.333-64-85.333c-22.144,0-37.995,12.48-38.656,12.992c-2.539,2.027-4.011,5.099-4.011,8.341v72.341L173.205,237.44l-2.539,1.301v-4.075c0-5.888-4.779-10.667-10.667-10.667H53.333C23.915,224,0,247.915,0,277.333V448c0,29.419,23.915,53.333,53.333,53.333h64c23.061,0,42.773-14.72,50.197-35.264C185.28,475.2,209.173,480,224,480h195.819c23.232,0,43.563-15.659,48.341-37.248
					c2.453-11.136,1.024-22.336-3.84-32.064c15.744-7.915,26.347-24.192,26.347-42.688c0-7.552-1.728-14.784-4.992-21.312C501.419,338.752,512,322.496,512,304z M467.008,330.325c-4.117,0.491-7.595,3.285-8.917,7.232c-1.301,3.947-0.213,8.277,2.816,11.136c5.419,5.099,8.427,11.968,8.427,19.307c0,13.461-10.176,24.768-23.637,26.325c-4.117,0.491-7.595,3.285-8.917,7.232c-1.301,3.947-0.213,8.277,2.816,11.136c7.019,6.613,9.835,15.893,7.723,25.451c-2.624,11.904-14.187,20.523-27.499,20.523H224c-17.323,0-46.379-8.28-56.448-18.219c-3.051-3.029-7.659-3.925-11.627-2.304c-3.989,1.643-6.592,5.547-6.592,9.856c0,17.643-14.357,32-32,32h-64c-17.643,0-32-14.357-32-32V277.333c0-17.643,14.357-32,32-32h96V256c0,3.691,1.92,7.125,5.077,9.088c3.115,1.877,7.04,2.069,10.368,0.448l21.333-10.667c2.155-1.067,3.883-2.859,4.907-5.056l64-138.667c0.64-1.408,0.981-2.944,0.981-4.48V37.781C260.437,35.328,268.139,32,277.333,32C289.024,32,320,61.056,320,96c0,37.547-20.437,91.669-20.629,92.203c-1.237,3.264-0.811,6.955,1.173,9.856c2.005,2.88,5.291,4.608,8.789,4.608h146.795c17.792,0,32.896,12.736,34.389,28.992c1.131,12.16-4.715,23.723-15.189,30.187c-3.264,2.005-5.205,5.632-5.056,9.493s2.368,7.317,5.781,9.088c9.024,4.587,14.613,13.632,14.613,23.573C490.667,317.461,480.491,328.768,467.008,330.325z"/></g></g><g><g><path d="M160,245.333c-5.888,0-10.667,4.779-10.667,10.667v192c0,5.888,4.779,10.667,10.667,10.667s10.667-4.779,10.667-10.667V256C170.667,250.112,165.888,245.333,160,245.333z"/></g></g></svg>
					<?php esc_html_e( 'Finished', 'drope-delivery' ); ?>
				</div>

				<div
					class="fdm-btn-order-action"
					data-manage-order-id=""
					data-manage-order-action="canceled"
					id="fdm-cancel-order"
				>
					<svg height="10pt" id="icon-fdm-plugin-trash" viewBox="-40 0 427 427.00131" width="10pt" xmlns="http://www.w3.org/2000/svg" fill="#ea1d2b"><path d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"/><path d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"/><path d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"/><path d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"/></svg>
					<?php esc_html_e( 'Cancel', 'drope-delivery' ); ?>
				</div>
			</div>
		</div>
	</div>
</div>
