function filterProdutcSearch(e,t){e.forEach((e=>{e.innerText.toLowerCase().includes(t.toLowerCase())?e.closest(".myd-product-item").classList.remove("myd-item-hide"):e.closest(".myd-product-item").classList.add("myd-item-hide")}))}function limitExtras(){let e=this.dataset.maxLimit;if(e){let t=this.dataset.type,r=this.classList;document.querySelectorAll("input."+r[0]+'[data-type="'+t+'"]:checked').length>e&&(this.checked=!1)}}function changeOptionTab(e){e.addEventListener("click",(()=>{let t=document.getElementById("input-delivery-zipcode"),r=document.getElementById("input-delivery-street-name"),d=document.getElementById("input-delivery-address-number"),c=document.getElementById("input-delivery-neighborhood"),i=document.getElementById("input-in-store-table");"delivery"==e.dataset.type&&(r.setAttribute("required","required"),i.removeAttribute("required","required"),null!=d&&d.setAttribute("required","required"),null!=c&&c.setAttribute("required","required"),null!=t&&t.setAttribute("required","required")),"take-away"==e.dataset.type&&(r.removeAttribute("required","required"),i.removeAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=d&&d.removeAttribute("required","required"),null!=c&&c.removeAttribute("required","required")),"order-in-store"==e.dataset.type&&(r.removeAttribute("required","required"),i.setAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=d&&d.removeAttribute("required","required"),null!=c&&c.removeAttribute("required","required")),document.querySelector(".myd-cart__checkout-option--active").classList.remove("myd-cart__checkout-option--active"),e.classList.add("myd-cart__checkout-option--active"),document.querySelectorAll(".myd-cart__checkout-field-group--active").forEach((e=>{e.classList.remove("myd-cart__checkout-field-group--active")})),document.querySelectorAll(e.dataset.content).forEach((e=>{e.classList.add("myd-cart__checkout-field-group--active")}))}))}function setOptionTab(e){let t=document.getElementById("input-delivery-zipcode"),r=document.getElementById("input-delivery-street-name"),d=document.getElementById("input-delivery-address-number"),c=(document.getElementById("input-delivery-comp"),document.getElementById("input-delivery-neighborhood")),i=document.getElementById("input-in-store-table");"delivery"==e.dataset.type&&(r.setAttribute("required","required"),i.removeAttribute("required","required"),null!=d&&d.setAttribute("required","required"),null!=c&&c.setAttribute("required","required"),null!=t&&t.setAttribute("required","required")),"take-away"==e.dataset.type&&(r.removeAttribute("required","required"),i.removeAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=d&&d.removeAttribute("required","required"),null!=c&&c.removeAttribute("required","required")),"order-in-store"==e.dataset.type&&(r.removeAttribute("required","required"),i.setAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=d&&d.removeAttribute("required","required"),null!=c&&c.removeAttribute("required","required")),document.querySelectorAll(".myd-cart__checkout-field-group--active").forEach((e=>{e.classList.remove("myd-cart__checkout-field-group--active")})),document.querySelectorAll(e.dataset.content).forEach((e=>{e.classList.add("myd-cart__checkout-field-group--active")}))}function openCart(){document.querySelector(".myd-cart__nav--active").classList.remove("myd-cart__nav--active"),document.querySelector(".myd-cart__content--active").classList.remove("myd-cart__content--active"),document.querySelector(".myd-cart__nav-bag").classList.add("myd-cart__nav--active"),checkOrderProductsEmpty()?(addTemplateToCart(getOrder()),document.querySelector(".myd-cart__products").classList.add("myd-cart__content--active")):document.querySelector(".myd-cart__products-empty").classList.add("myd-cart__content--active"),document.querySelector(".myd-checkout").classList.toggle("myd-checkout--open"),document.body.classList.toggle("myd-cart-open")}function closeCart(){document.querySelector(".myd-checkout").classList.toggle("myd-checkout--open"),document.body.classList.toggle("myd-cart-open")}function backTab(){if(window?.disable_back)return;let e=document.querySelector(".myd-cart__nav--active");if("none"!=e.dataset.back){e.classList.remove("myd-cart__nav--active"),document.querySelector("."+e.dataset.tabContent).classList.remove("myd-cart__content--active");let t=document.querySelector("."+e.dataset.back);t.classList.add("myd-cart__nav--active"),document.querySelector("."+t.dataset.tabContent).classList.add("myd-cart__content--active")}}async function nextTab(){if(checkOrderProductsEmpty()){if(!1===checkStoreTime()||!1===checkMinimumPurchase())return;let e=document.querySelector(".myd-cart__nav--active");if("myd-cart__nav-shipping"===e.dataset.next&&fillUserData(),"myd-cart__nav-payment"===e.dataset.next){if(0==validateInputs("checkout"))return;let e=document.querySelector(".myd-cart__checkout-option.myd-cart__checkout-option--active").firstElementChild;if(0==validateZipcodeShipping(e.dataset.type))return;await processCheckout(e.dataset.type,e.innerText),updateCartLayoutItems(),saveUserDataLocalStorage()}if("none"!=e.dataset.next&&"myd-cart__finished"!==e.dataset.next){e.classList.remove("myd-cart__nav--active"),document.querySelector("."+e.dataset.tabContent).classList.remove("myd-cart__content--active");let t=document.querySelector("."+e.dataset.next);t.classList.add("myd-cart__nav--active"),document.querySelector("."+t.dataset.tabContent).classList.add("myd-cart__content--active")}if("myd-cart__finished"===e.dataset.next){if(!1===validateInputs("payment"))return;let t=document.querySelector(".myd-cart__checkout-option.myd-cart__checkout-option--active").firstElementChild;await processCheckout(t.dataset.type,t.innerText),window.createOrderV2(e)}}else notificationBar("error",mydStoreInfo.messages.cartEmpty)}function showChange(){let e=document.getElementById("input-payment-change"),t=document.getElementById("label-payment-change");"cash"==this.options[this.selectedIndex].dataset.type?(e.style.display="block",e.style.visibility="visible",e.setAttribute("required","required"),t.style.display="block",t.style.visibility="visible"):(e.style.display="none",e.style.visibility="hidden",e.removeAttribute("required","required"),t.style.display="none",t.style.visibility="hidden")}function saveUserDataLocalStorage(){let e=document.querySelectorAll(".myd-cart__checkout-input"),t={};e.length>0&&e.forEach((e=>{"input-payment"!==e.id&&"input-payment-change"!==e.id&&"input-delivery-neighborhood"!==e.id&&"input-coupon"!==e.id&&(t[e.id]=e.value)})),setUserDataLocalStorage(t)}function fillUserData(){let e=getUserDataLocalStorage();e&&(e=Object.entries(e)).forEach((e=>{let t=document.getElementById(e[0]);t&&(t.value=e[1])}))}function getUserDataLocalStorage(){return JSON.parse(localStorage.getItem("mydUserData"))||{}}function setUserDataLocalStorage(e){let t=Object.assign(getUserDataLocalStorage(),e);localStorage.setItem("mydUserData",JSON.stringify(t))}document.addEventListener("DOMContentLoaded",(function(){if(null==document.querySelector(".myd-product-list"))return;updateCountTotal(getOrder()),document.querySelector(".myd-float").addEventListener("click",openCart),document.querySelector(".myd-cart__nav-close").addEventListener("click",closeCart),document.querySelector(".myd-cart__nav-back").addEventListener("click",backTab);let e=document.querySelectorAll(".myd-cart__checkout-option");1!=e.length&&2!=e.length||(e[0].classList.add("myd-cart__checkout-option--active"),setOptionTab(e[0])),e.forEach(changeOptionTab),document.querySelector(".myd-cart__button").addEventListener("click",nextTab);let t=document.querySelectorAll(".fdm-add-to-cart-popup");t.length>0&&t.forEach((e=>{e.addEventListener("click",addToOrder)})),document.querySelector(".myd-cart__products").addEventListener("click",(e=>{e.target.parentElement.matches(".myd-cart__products-action")&&removeItem(e.target.parentElement.dataset.productIndex)}));let r=document.querySelectorAll(".fdm-popup-product-content .option_prod_exta");r.length>0&&r.forEach((e=>{e.addEventListener("change",limitExtras)})),document.getElementById("input-payment").addEventListener("change",showChange);let d=document.getElementById("myd-content-filter__search-icon"),c=document.getElementById("myd-content-filter__search-input");window.screen.width<768&&d&&d.addEventListener("click",(e=>{c&&c.classList.toggle("myd-content-filter-show")}));let i=document.querySelectorAll(".myd-product-item .myd-product-item__title"),a=document.getElementById("myd-search-products"),o=document.querySelectorAll(".myd-product-list__title"),n=document.querySelectorAll(".myd-product-item__divider");a&&a.addEventListener("keyup",(e=>{""!=a.value?(o.forEach((e=>{e.classList.add("myd-item-hide")})),n.forEach((e=>{e.classList.add("myd-item-hide")})),filterProdutcSearch(i,a.value)):i.forEach((e=>{e.closest(".myd-product-item").classList.remove("myd-item-hide"),o.forEach((e=>{e.classList.remove("myd-item-hide")})),n.forEach((e=>{e.classList.remove("myd-item-hide")}))}))}));let u=document.querySelectorAll(".myd-product-popup__img"),l=document.getElementById("myd-image-preview-image"),s=document.getElementById("myd-image-preview-popup");u.length>0&&l&&s&&(u.forEach((e=>{e.addEventListener("click",(t=>{l.src=e.dataset.image,s.classList.toggle("myd-hide-element")}))})),s.addEventListener("click",(e=>{s.classList.toggle("myd-hide-element")})),l.addEventListener("click",(e=>{e.stopPropagation()})));let m=document.getElementById("myd-image-preview-popup-close");m&&m.addEventListener("click",(e=>{s.classList.toggle("myd-hide-element")}));let y=document.querySelectorAll(".myd-product-item");y.length>0&&y.forEach((e=>{e.addEventListener("click",(t=>{let r=document.getElementById(`popup-${e.dataset.id}`);r&&r.classList.toggle("myd-hide-element")}))}));let p=document.querySelectorAll(".fdm-popup-close-btn");p.length>0&&p.forEach((e=>{e.addEventListener("click",(t=>{e.parentElement.parentElement.classList.toggle("myd-hide-element")}))}));let v=document.getElementById("myd-checkout");v&&v.addEventListener("click",closeCart);let h=document.getElementById("myd-cart");h&&h.addEventListener("click",(e=>{e.stopPropagation()}))}));