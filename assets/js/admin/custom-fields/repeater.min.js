const removeOption=document.querySelectorAll(".myd-repeater-summary__action--remove");removeOption.length>0&&removeOption.forEach(e=>{e.addEventListener("click",removeExtraOption)});const removeProductExtraButtons=document.querySelectorAll(".myd-repeater-container__remove");removeProductExtraButtons.length>0&&removeProductExtraButtons.forEach(e=>{e.addEventListener("click",removeProductExtra)});const addOption=document.querySelectorAll(".myd-repeater-add-option");addOption.length>0&&addOption.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),addNewOption(e)})});const addProductExtra=document.querySelectorAll(".myd-repeater-add-extra");function removeProductExtra(){if(this.parentNode.previousElementSibling||!this.parentNode.previousElementSibling&&!this.parentNode.nextElementSibling.matches("button"))this.parentNode.remove();else{const e=this.parentNode;if(e){let t=e.querySelector(".myd-repeater-summary__title");t&&(t.innerText="")}const t=e.querySelectorAll(".myd-repeater-input");t.length>0&&t.forEach(e=>{"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1})}}function removeExtraOption(){if(this.parentNode.parentNode.previousElementSibling.matches("details")||!this.parentNode.parentNode.previousElementSibling.matches("details")&&this.parentNode.parentNode.nextElementSibling.matches("details"))this.parentNode.parentNode.remove();else{const e=this.parentNode.parentNode;if(e){let t=e.querySelector(".myd-repeater-summary__title");t&&(t.innerText="")}const t=e.querySelectorAll(".myd-repeater-input");t.length>0&&t.forEach(e=>{"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1})}}function addNewOption(e){const t=e.parentNode.querySelector("details:last-of-type").cloneNode(!0);let r=t.querySelector(".myd-repeater-summary__title");r&&(r.innerText="");const n=t.querySelectorAll(".myd-repeater-input");n.length>0&&n.forEach(e=>{let t=e.dataset.mainIndex,r=e.dataset.name,n=e.dataset.internalIndex||"";if(t&&r){let a=Number(n)+1;r=(r=r.replace(/{{main-index}}/,t)).replace(/{{internal-index}}/,a),e.name=r,e.dataset.internalIndex=a,"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}});const a=t.querySelector(".myd-repeater-summary__action--remove");a&&a.addEventListener("click",removeExtraOption),e.parentNode.insertBefore(t,e)}function addNewExtra(e){const t=e.parentNode.querySelector(".myd-repeater-container--top-level:last-of-type").cloneNode(!0);let r=t.querySelectorAll("details.myd-repeater-container:not(:first-of-type)");r.length>0&&r.forEach(e=>{e.remove()});let n=t.querySelector(".myd-repeater-summary__title");n&&(n.innerText="");const a=t.querySelectorAll(".myd-repeater-input");a.length>0&&a.forEach(e=>{let t=e.dataset.mainIndex,r=e.dataset.name,n=e.dataset.internalIndex||"";if(t&&r){let a=Number(t)+1;r=(r=r.replace(/{{main-index}}/,a)).replace(/{{internal-index}}/,n),e.name=r,e.dataset.mainIndex=a,"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}});const o=t.querySelector(".myd-repeater-container__remove");o&&o.addEventListener("click",removeProductExtra);const d=t.querySelector(".myd-repeater-add-option");d&&d.addEventListener("click",e=>{e.preventDefault(),addNewOption(d)}),e.parentNode.insertBefore(t,e)}addProductExtra.length>0&&addProductExtra.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),addNewExtra(e)})});